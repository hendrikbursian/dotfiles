# ZSH Config
plugins=(
  asdf
  git
  z
  fzf
  vi-mode
)

source $ZSH/oh-my-zsh.sh

export ZSH_COMPDUMP="$XDG_DATA_HOME/zsh/zcompdump-${SHORT_HOST}-${ZSH_VERSION}"

# TODO:Find better way for this
source $XDG_DATA_HOME/nvim/plugged/gruvbox/gruvbox_256palette.sh

source $ZDOTDIR/dircolors # Generated by: $ dircolors $ZDOTDIR/.dircolors > $ZDOTDIR/dircolors
source $ZDOTDIR/aliases
source $ZDOTDIR/functions

bindkey -s ^f "tmux-sessionizer\n"
bindkey -v

# Remove mode switching delay.
KEYTIMEOUT=5

# Change cursor shape for different vi modes.
function zle-keymap-select {
    if [[ ${KEYMAP} == vicmd ]] || [[ $1 = 'block' ]]; then
        echo -ne '\e[1 q'

    elif [[ ${KEYMAP} == main ]] ||
        [[ ${KEYMAP} == viins ]] ||
        [[ ${KEYMAP} = '' ]] ||
        [[ $1 = 'beam' ]]; then
        echo -ne '\e[5 q'
    fi
}
zle -N zle-keymap-select

# Use beam shape cursor on startup.
echo -ne '\e[5 q'

# Use beam shape cursor for each new prompt.
precmd() {
    echo -ne '\e[5 q'
}

# Completion
_comp_options+=(globdots) # complete dotfiles

if command -v phpenv &> /dev/null
then
  # PHPenv
  eval "$(phpenv init -)"
fi


# WP CLI
[ -s "$HOME/.local/completions/wp-completions.bash" ] && source $HOME/.local/completions/wp-completion.bash

[ -s "$ZDOTDIR/.zshrc.local" ] && source "$ZDOTDIR/.zshrc.local"
